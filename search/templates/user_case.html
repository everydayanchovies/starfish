{% extends 'base.html' %}

{% block header %}
    <link href="/static/css/read_more_link.css" rel="stylesheet">
    <script src="/static/js/read_more_links.js"></script>
{% endblock %}

{% block content %}
<div class="item-container container">
    <div class="row">
        <div class="col-xs-12">
            <h1 style='margin: 0px;'>
                {{ information.title }}
            </h1>
        </div>
        <div class="col-md-4 col-xs-12" style="padding-top: 10px;">
            <span class="text-muted">Posted by <a
                    href="/person/{{ information.author.id }}">{{ syntax.PERSON }}{{ information.author.handle }}</a> on {{ information.create_date }}</span>
            {% if information.exp_date %}
                <span class="text-muted pull-right">Valid until {{ information.exp_date }}</span>
            {% endif %}

            <p style="margin-top: 20px;">
            <span class='btn btn-primary' style='width:100%;'
                  onclick="load_questionform('{{ information.type }}', '{{ information.id }}', '#questionbox')">
				Ask a question
	        </span>
            </p>

            {% if search %}
                <p>
                    <a class='btn btn-default' href='/?q=%23{{ search.handle }}' style='width:100%;'>
                        Search
                    </a>
                </p>
            {% endif %}
        </div>

        <div class="col-md-8 col-xs-12 d-flex">
            <div class="tag-slider" id="wikipedia" style="padding: 10px; padding-top: 0;">
                {% for summary in summaries %}
                    <div class="card expandable {% if summary.summary|length <= 200 %} expanded {% endif %}"
                         style="width: 20rem; margin: 10px; border: 1px solid #EAEAEA; border-radius: 10px; padding: 10px 20px;">
                        <div class="card-body" style="padding: 0px;">
                            <h5 class="card-title">{% include 'tag.html' with tag=summary.raw_tag %}</h5>
                            <p class="card-text" style="font-size: 80%;">{{ summary.summary }}</p>
                            <a href="/?q=%23{{ summary.tag }}" class="btn btn-primary btn-sm">Explore</a>

                            {% if summary.url != None or summary.summary|length > 200 %}
                                <a href="#" data-wiki-href="{{ summary.url }}" class="btn btn-link btn-sm wiki-link">
                            {% if summary.summary|length > 200 %}
                                    Read more...
                            {% else %}
                                Visit...
                                {% endif %}
                                </a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>


    {% include 'tag_list.html' %}

    <!-- {% include 'tag_list.html' %} -->

    <script type="text/javascript">
     $(document).ready(function () {
         $('.tag-slider').slick({
             slidesToShow: 3,
             slidesToScroll: 3,
             dots: true,
             autoplay: true,
             autoplaySpeed: 60000,
         });
     });
    </script>
    <style>
        .slick-prev:before, .slick-next:before {
            color: black;
        }

        .slick-track {
            display: flex !important;
        }

        .slick-slide {
            height: inherit !important;
        }

        li a {
            background-color: rgba(20, 50, 70, 0.1) !important;
        }

        li.active a {
            color: white !important;
            background-color: rgb(20, 50, 70) !important;
        }
    </style>


    <div class="row" style="margin-top: -10px;">
    {% if information.text %}
        {% if community_links|length %}
            <div class="col-lg-9 highlight">
        {% else %}
            <div class="col-lg-12 highlight">
        {% endif %}

    <div class="row">
        <div class="col-xs-12 col-md-8">
            {% if information.text %}
                {% autoescape off %}
                    {{ information.text }}
                {% endautoescape %}
            {% endif %}
        </div>

        <div class="col-xs-12 col-md-4" style="max-height:300px; overflow: hidden;">
            <div style="width: 100%; padding-bottom: 85%; background: url('/media/{{ information.wallpaper }}'); background-size: cover; background-position: center;">
            </div>
        </div>

    </div>
    <ul class="nav nav-tabs" role="tablist" style="margin-top: 20px">
        <li class="active">
            <a href="#contextgoals" role="tab" data-toggle="tab">Context and Goals</a>
        </li>
        <li>
            <a href="#profile" role="tab" data-toggle="tab">CPD Activities</a>
        </li>
        <li>
            <a href="#messages" role="tab" data-toggle="tab">Evaluation</a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade active in" id="contextgoals">
            {% if information.context_goals %}
                {% autoescape off %}
                    {{ information.context_goals }}
                {% endautoescape %}
            {% endif %}
        </div>
        <div class="tab-pane fade" id="profile">
            {% if information.cpd_activities %}
                {% autoescape off %}
                    {{ information.cpd_activities }}
                {% endautoescape %}
            {% endif %}
        </div>
        <div class="tab-pane fade" id="messages">
            {% if information.evaluation %}
                {% autoescape off %}
                    {{ information.evaluation }}
                {% endautoescape %}
            {% endif %}
        </div>
    </div>

    <hr style='margin-bottom: 10px;'/>
    {% include 'licence.html' %}
    </div>
    {% endif %}
{% if community_links|length %}
    {% if information.text %}
        <div class="col-lg-3" style='padding: 0;'>
        <div class='' style='padding: 0 10px'>
    {% else %}
        <div class="col-lg-12">
    {% endif %}
<div style="background-color: rgb(20, 50, 70); padding: 20px; color: white; border-radius: 10px;">
    <h3 style='margin-top: 0px;'>See also</h3>
    {% include 'link_list.html' with item=information %}
    {% if information.text %}
        </div>
    {% endif %}
</div>
</div>
{% endif %}
</div>
</div>
    <div class="row">
        <div class="col-lg-9 highlight" id="questionbox" style="margin-top: 15px; display:none;">
            <a name="question"></a>
        </div>
    </div>
</div>

{% endblock %}
{# vim: set ft=htmldjango ts=2 sw=2 softtabstop=2: #}

